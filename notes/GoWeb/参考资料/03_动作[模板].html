<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600243 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 16pt;
    }
  </style>
</head>
<body>
<a name="941"/>
<h1>03_动作</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/9/5 16:28</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2018/9/5 17:09</i></td></tr>
<tr><td><b>作者：</b></td><td><i>韩延兵</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><div>1.简介</div><ul><li><div>Go的模板引擎处理模板文件和数据时需要用到模板文件中的一些命令，这些命令我们称之为动作</div></li><li><div>动作的格式</div></li><ul><li><div>动作需要放到 两对大括号里面</div></li><li><div>例如：{{ 动作 }}</div></li></ul><li><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">点（.）是一个很重要的动作，代表了传给模板的数据</span></div></li></ul><div><span>2.动作的分类</span></div><ul><li><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">1）条件动作</span></div></li><ul><li><div>格式一</div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51);-en-paragraph:true;"><font face="Consolas" style="font-size: 16pt;">{{ <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">if</span> arg }}</font></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(51, 51, 51);-en-paragraph:true;"><font face="Consolas" style="font-size: 16pt;"><span>    如果arg为true则显示这部门内容</span></font></span></div><div><span style="line-height: 150%; color: rgb(51, 51, 51);"><font face="Consolas" style="font-size: 16pt;">{{ end }}</font></span></div></div><ul><li><div>格式二</div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-size: 16pt; font-family: Consolas;-en-paragraph:true;">{{</span> <span style="color: rgb(51, 51, 51); font-size: 16pt; font-family: Consolas; background-color: rgb(255, 250, 165);-evernote-highlight:true;-en-paragraph:true;">if</span> <span style="color: rgb(51, 51, 51); font-size: 16pt; font-family: Consolas;-en-paragraph:true;">arg }}</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(51, 51, 51); font-size: 16pt; font-family: Consolas;-en-paragraph:true;">    如果arg为true则显示这部门内容</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(51, 51, 51); font-size: 16pt; font-family: Consolas;-en-paragraph:true;">{{ else }}</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(51, 51, 51); font-size: 16pt; font-family: Consolas;-en-paragraph:true;"><span>    <span style="color: rgb(51, 51, 51); font-size: 16pt; font-family: Consolas;-en-paragraph:true;">如果arg为false则显示这部门内容</span></span><br/></span></div><div><span style="line-height: 150%; color: rgb(51, 51, 51); font-size: 16pt; font-family: Consolas;">{{ end }}</span></div></div><ul><ul><li><div>其中的arg是传递给条件动作的参数，该值可以是一个布尔值、一个字符串常量、一个变量、一个返回单个值的函数或者方法等</div></li></ul><li><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">2）迭代动作</span></div></li><ul><li><div>格式一</div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51);-en-paragraph:true;"><font face="Consolas" style="font-size: 16pt;">{{<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">range</span> . }}</font></span></div><div style="margin-left: 0cm; margin-top: 1em; margin-bottom: 1em;"><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(51, 51, 51);-en-paragraph:true;"> </span><span style="color: rgb(51, 51, 51);-en-paragraph:true;">遍历到的元素是</span> <span style="color: rgb(51, 51, 51);-en-paragraph:true;">{{ . }}</span></font></div><div><span style="line-height: 150%; color: rgb(51, 51, 51);"><font face="Consolas" style="font-size: 16pt;">{{ end }}</font></span></div></div><ul><li><div>格式二</div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-size: 16pt; font-family: Consolas;-en-paragraph:true;">{{range . }}</span></div><div style="margin-left: 0cm; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16pt; font-family: Consolas; color: rgb(51, 51, 51);-en-paragraph:true;"> </span><span style="font-size: 16pt; font-family: Consolas; color: rgb(51, 51, 51);-en-paragraph:true;">遍历到的元素是</span> <span style="font-size: 16pt; font-family: Consolas; color: rgb(51, 51, 51);-en-paragraph:true;">{{ . }}</span></div><div style="margin-left: 0cm; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16pt; font-family: Consolas; color: rgb(51, 51, 51);-en-paragraph:true;">{{ else }}</span></div><div style="margin-left: 0cm; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16pt; font-family: Consolas; color: rgb(51, 51, 51);-en-paragraph:true;"><span>    没有遍历到任何元素</span><br/></span></div><div><span style="line-height: 150%; color: rgb(51, 51, 51); font-size: 16pt; font-family: Consolas;">{{ end }}</span></div></div><ul><li><div>range后面的点代表被遍历的元素；要显示的内容里面的点代表遍历到的元素</div></li><li><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">另外遍历map时还可以通过$指定变量</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51);-en-paragraph:true;"><font face="Consolas" style="font-size: 16pt;">{{ <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">range</span> $k , $v := . }}</font></span></div><div style="margin-left: 0cm; margin-top: 1em; margin-bottom: 1em;"><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(51, 51, 51);-en-paragraph:true;"> </span><span style="color: rgb(51, 51, 51);-en-paragraph:true;">键是</span> <span style="color: rgb(51, 51, 51);-en-paragraph:true;">{{ $k }} ,</span> <span style="color: rgb(51, 51, 51);-en-paragraph:true;">值是</span> <span style="color: rgb(51, 51, 51);-en-paragraph:true;">{{ $v }}</span></font></div><div><span style="line-height: 150%; color: rgb(51, 51, 51);"><font face="Consolas" style="font-size: 16pt;">{{ end }}</font></span></div></div><ul><li><div>3）设置动作</div></li><ul><li><div>格式一</div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51);-en-paragraph:true;"><font style="font-size: 16pt; font-family: Consolas;">{{ <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">with</span> arg }}<span>    </span></font></span></div><div style="margin-left: 0cm; margin-top: 1em; margin-bottom: 1em;"><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(51, 51, 51);-en-paragraph:true;"> </span><span style="color: rgb(51, 51, 51);-en-paragraph:true;">为传过来的数据设置的新值是</span><span style="color: rgb(51, 51, 51);-en-paragraph:true;">{{ . }}</span></font></div><div><span style="line-height: 150%; color: rgb(51, 51, 51);"><font face="Consolas" style="font-size: 16pt;">{{ end }}</font></span></div></div><ul><ul><li><div><span style="color: rgb(51, 51, 51); font-family: Consolas; font-size: 16pt;-en-paragraph:true;">arg就是给传过来的数据设置的新值</span></div></li></ul><li><div>格式二</div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51);-en-paragraph:true;"><font face="Consolas" style="font-size: 16pt;">{{ <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">with &quot;&quot;</span> }}</font></span></div><div style="margin-left: 0cm; margin-top: 1em; margin-bottom: 1em;"><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(51, 51, 51);-en-paragraph:true;"> 由于with后面是空串，此部分不执行，执行else的部门，相当于没有修改传过来的数据</span></font></div><div style="margin-left: 0cm; margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(51, 51, 51);-en-paragraph:true;"><font face="Consolas" style="font-size: 16pt;">{{ else }}</font></span></div><div style="margin-left: 0cm; margin-top: 1em; margin-bottom: 1em;"><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(51, 51, 51);-en-paragraph:true;"> </span><span style="color: rgb(51, 51, 51);-en-paragraph:true;">传过来的数据仍然是</span><span style="color: rgb(51, 51, 51);-en-paragraph:true;">{{ . }}</span></font></div><div><span style="line-height: 150%; color: rgb(51, 51, 51);"><font face="Consolas" style="font-size: 16pt;">{{ end }}</font></span></div></div><ul><li><div>4）包含动作</div></li><ul><li><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">包含动作允许用户在一个模板里包含另一个模板</span></div></li><ul><li><div>格式一</div></li><ul><li><div>不将数据传入到包含的模板中</div></li></ul></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Consolas" style="font-size: 16pt;"><span style="line-height: 150%; color: rgb(51, 51, 51);">{{ <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">template</span> “name” }}</span></font></div></div><ul><ul><li><div>name是被包含的模板的名字</div></li></ul><li><div>格式二</div></li><ul><li><div>将传过来的数据再传入到包含的模板中</div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Consolas" style="font-size: 16pt;"><span style="line-height: 150%; color: rgb(51, 51, 51);">{{ <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">template</span> “name” .}}</span></font></div></div><ul><ul><li><div>动作中的 . 就是要传给被包含模板的数据，也是后台传给当前模板的数据</div></li></ul><li><div>5）定义动作</div></li><ul><li><div>对于每个页面中的相同部门，例如导航栏、版权信息等可以<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">通过定义动作在模板文件中定义模板来实现</span></div></li><ul><li><div><span>格式</span></div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51);"><font face="Consolas" style="font-size: 16pt;">{{ <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">define</span> &quot;arg&quot; }}</font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Consolas" style="font-size: 16pt;"><span>    这里就是页面中相同的部门</span><br/></font></span></div><div><span style="color: rgb(51, 51, 51);"><font face="Consolas" style="font-size: 16pt;">{{ end }}</font></span></div></div><ul><ul><ul><li><div>arg就是定义的模板的名字，将来可以在其他模板文件中通过包含动作将当前定义的模板包含进去</div></li></ul><li><div>我们还可以在不同的模板文件中定义同名的模板</div></li></ul><li><div>6）块动作</div></li><ul><li><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">块动作相当于定义了一个默认的模板，在找不到模板时将会使用它</span></div></li><ul><li><div>格式</div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(51, 51, 51);-en-paragraph:true;">{{ <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">block</span> arg .}}</span></font></div><div style="margin-left: 0cm; margin-top: 1em; margin-bottom: 1em;"><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(51, 51, 51);-en-paragraph:true;"> 如果在模板文件中找不到名字叫arg的模板时就执行当前的内容</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="line-height: 150%; color: rgb(51, 51, 51);">{{ end }}</span></font></div></div><div><br/></div></div></span>
</div></body></html> 