<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600243 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 16pt;
    }
  </style>
</head>
<body>
<a name="939"/>
<h1>02_处理请求&amp;模板引擎&amp;处理静态资源</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2018/9/4 17:04</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2018/9/4 17:28</i></td></tr>
<tr><td><b>作者：</b></td><td><i>韩延兵</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><div>1.处理请求</div><ul><li><div>通过net/http包中的Request结构体中的字段可以获取请求报文中的信息</div></li><li><div>获取请求行中的信息</div></li><ul><li><div>获取请求的URL</div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(106, 153, 85);"><font face="Consolas" style="font-size: 16pt;">//创建处理器函数</font></span></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(86, 156, 214);">func</span> <span style="color: rgb(220, 220, 170);">handler</span><span style="color: rgb(212, 212, 212);">(w http.ResponseWriter, r</span> <span style="color: rgb(212, 212, 212);">*</span><span style="color: rgb(212, 212, 212);">http.Request) {</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    fmt.</span><span style="color: rgb(220, 220, 170);">Fprintln</span><span style="color: rgb(212, 212, 212);">(w,</span> <span style="color: rgb(206, 145, 120);">&quot;你发送的请求的请求地址是：&quot;</span><span style="color: rgb(212, 212, 212);">, r.URL.Path)</span></font></div><div><span style="color: rgb(212, 212, 212);"><font face="Consolas" style="font-size: 16pt;">}</font></span></div></div><ul><li><div>获取URL后面的查询字符串</div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(106, 153, 85); font-size: 16pt; font-family: Consolas;">//创建处理器函数</span></div><div><span style="font-size: 16pt; font-family: Consolas; color: rgb(86, 156, 214);">func</span> <span style="font-size: 16pt; font-family: Consolas; color: rgb(220, 220, 170);">handler</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">(w http.ResponseWriter, r</span> <span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">*</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">http.Request) {</span></div><div><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">    </span><span style="color: rgb(212, 212, 212); font-family: Consolas; font-size: 16pt;">fmt.</span><span style="font-family: Consolas; font-size: 16pt; color: rgb(220, 220, 170);">Fprintln</span><span style="color: rgb(212, 212, 212); font-family: Consolas; font-size: 16pt;">(w,</span> <span style="font-family: Consolas; font-size: 16pt; color: rgb(206, 145, 120);">&quot;你发送的请求的请求地址后的查询字符串是：&quot;</span><span style="color: rgb(212, 212, 212); font-family: Consolas; font-size: 16pt;">, r.URL.RawQuery)</span></div><div><span style="color: rgb(212, 212, 212); font-size: 16pt; font-family: Consolas;">}</span></div></div><ul><li><div>获取请求头中的信息</div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(106, 153, 85); font-size: 16pt; font-family: Consolas;">//创建处理器函数</span></div><div><span style="font-size: 16pt; font-family: Consolas; color: rgb(86, 156, 214);">func</span> <span style="font-size: 16pt; font-family: Consolas; color: rgb(220, 220, 170);">handler</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">(w http.ResponseWriter, r</span> <span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">*</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">http.Request) {</span><span style="color: rgb(212, 212, 212); font-family: Consolas; font-size: 16pt;">   </span></div><div><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);"><span style="color: #d4d4d4; font-family: Consolas;"><span>    </span>fmt.</span><span style="color: #dcdcaa; font-family: Consolas;">Fprintln</span><span style="color: #d4d4d4; font-family: Consolas;">(w,</span> <span style="color: #ce9178; font-family: Consolas;">&quot;请求头中的所有信息有：&quot;</span><span style="color: #d4d4d4; font-family: Consolas;">, r.Header)</span></span></div><div><span style="color: #d4d4d4; font-family: Consolas;">    fmt.</span><span style="color: #dcdcaa; font-family: Consolas;">Fprintln</span><span style="color: #d4d4d4; font-family: Consolas;">(w,</span> <span style="color: #ce9178; font-family: Consolas;">&quot;请求头中Accept-Encoding的信息是：&quot;</span><span style="color: #d4d4d4; font-family: Consolas;">, r.Header[</span><span style="color: #ce9178; font-family: Consolas;">&quot;Accept-Encoding&quot;</span><span style="color: #d4d4d4; font-family: Consolas;">])</span></div><div><span style="color: #d4d4d4; font-family: Consolas;">    fmt.</span><span style="color: #dcdcaa; font-family: Consolas;">Fprintln</span><span style="color: #d4d4d4; font-family: Consolas;">(w,</span> <span style="color: #ce9178; font-family: Consolas;">&quot;请求头中Accept-Encoding的属性值是：&quot;</span><span style="color: #d4d4d4; font-family: Consolas;">, r.Header.</span><span style="color: #dcdcaa; font-family: Consolas;">Get</span><span style="color: #d4d4d4; font-family: Consolas;">(</span><span style="color: #ce9178; font-family: Consolas;">&quot;Accept-Encoding&quot;</span><span style="color: #d4d4d4; font-family: Consolas;">))</span></div><div><span style="color: rgb(212, 212, 212); font-size: 16pt; font-family: Consolas;">}</span></div></div><ul><li><div>获取请求体中的信息</div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(106, 153, 85); font-size: 16pt; font-family: Consolas;">//创建处理器函数</span></div><div><span style="font-size: 16pt; font-family: Consolas; color: rgb(86, 156, 214);">func</span> <span style="font-size: 16pt; font-family: Consolas; color: rgb(220, 220, 170);">handler</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">(w http.ResponseWriter, r</span> <span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">*</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">http.Request) {</span><span style="color: rgb(212, 212, 212); font-family: Consolas; font-size: 16pt;">   </span></div><div><span style="font-size: 16pt; font-family: Consolas; color: #d4d4d4;">    </span><span style="color: rgb(106, 153, 85); font-family: Consolas; font-size: 16pt;">//获取请求体重内容的长度</span><div><span style="font-size: 16pt; font-family: Consolas; color: #d4d4d4;"><span style="color: #d4d4d4; font-family: Consolas;">    </span><span style="color: #9cdcfe; font-family: Consolas;">len</span> <span style="color: #d4d4d4; font-family: Consolas;">:=</span> <span style="color: #d4d4d4; font-family: Consolas;">r.ContentLength</span></span></div><div><span style="color: #d4d4d4; font-family: Consolas;">    </span><span style="color: #6a9955; font-family: Consolas;">//创建byte切片</span></div><div><span style="color: #d4d4d4; font-family: Consolas;">    </span><span style="color: #9cdcfe; font-family: Consolas;">body</span> <span style="color: #d4d4d4; font-family: Consolas;">:=</span> <span style="color: #dcdcaa; font-family: Consolas;">make</span><span style="color: #d4d4d4; font-family: Consolas;">([]</span><span style="color: #4ec9b0; font-family: Consolas;">byte</span><span style="color: #d4d4d4; font-family: Consolas;">, len)</span></div><div><span style="color: #d4d4d4; font-family: Consolas;">    </span><span style="color: #6a9955; font-family: Consolas;">//将请求体中的内容读到body中</span></div><div><span style="color: #d4d4d4; font-family: Consolas;">    r.Body.</span><span style="color: #dcdcaa; font-family: Consolas;">Read</span><span style="color: #d4d4d4; font-family: Consolas;">(body)</span></div><div><span style="color: #d4d4d4; font-family: Consolas;">    </span><span style="color: #6a9955; font-family: Consolas;">//在浏览器中显示请求体中的内容</span></div><div><span style="color: #d4d4d4; font-family: Consolas;">    fmt.</span><span style="color: #dcdcaa; font-family: Consolas;">Fprintln</span><span style="color: #d4d4d4; font-family: Consolas;">(w,</span> <span style="color: #ce9178; font-family: Consolas;">&quot;请求体中的内容有：&quot;</span><span style="color: #d4d4d4; font-family: Consolas;">,</span> <span style="color: #dcdcaa; font-family: Consolas;">string</span><span style="color: #d4d4d4; font-family: Consolas;">(body))</span></div></div><div><span style="color: rgb(212, 212, 212); font-size: 16pt; font-family: Consolas;">}</span></div></div><ul><li><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">获取请求参数</span></div></li><ul><li><div>可以通过Request结构体的Form字段获取PostForm字段获取请求参数</div></li><ul><li><div>Form字段</div></li><ul><li><div>可以获取Get请求和Post请求中的请求参数</div></li></ul><li><div>PostForm字段</div></li><ul><li><div>只能获取Post请求表单中的请求参数</div></li></ul><li><div>在通过Form字段和PostForm字段获取请求参数之前必须要先调用ParseForm方法</div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(106, 153, 85); font-size: 16pt; font-family: Consolas;">//创建处理器函数</span></div><div><span style="font-size: 16pt; font-family: Consolas; color: rgb(86, 156, 214);">func</span> <span style="font-size: 16pt; font-family: Consolas; color: rgb(220, 220, 170);">handler</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">(w http.ResponseWriter, r</span> <span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">*</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">http.Request) {</span><span style="color: rgb(212, 212, 212); font-family: Consolas; font-size: 16pt;">   </span></div><div><span style="font-size: 16pt; font-family: Consolas; color: #d4d4d4;">    </span><span style="color: rgb(106, 153, 85); font-family: Consolas; font-size: 16pt;">//解析表单，在调用r.Form之前必须执行该操作</span><div><span style="font-size: 16pt; font-family: Consolas; color: #d4d4d4;"><span style="color: #d4d4d4; font-family: Consolas;">    r.</span><span style="color: #dcdcaa; font-family: Consolas;">ParseForm</span><span style="color: #d4d4d4; font-family: Consolas;">()</span></span></div><div><span style="color: #d4d4d4; font-family: Consolas;">    </span><span style="color: #6a9955; font-family: Consolas;">//获取请求参数</span></div><div><span style="color: #d4d4d4; font-family: Consolas;">    </span><span style="color: #6a9955; font-family: Consolas;">//如果form表单的action属性的URL地址中也有与form表单参数名相同的请求参数，</span></div><div><span style="color: #d4d4d4; font-family: Consolas;">    </span><span style="color: #6a9955; font-family: Consolas;">//那么参数值都可以得到，并且form表单中的参数值在ULR的参数值的前面</span></div><div><span style="color: #d4d4d4; font-family: Consolas;">    fmt.</span><span style="color: #dcdcaa; font-family: Consolas;">Fprintln</span><span style="color: #d4d4d4; font-family: Consolas;">(w,</span> <span style="color: #ce9178; font-family: Consolas;">&quot;请求参数有：&quot;</span><span style="color: #d4d4d4; font-family: Consolas;">, r.Form)</span></div><div><span style="color: #d4d4d4; font-family: Consolas;">    fmt.</span><span style="color: #dcdcaa; font-family: Consolas;">Fprintln</span><span style="color: #d4d4d4; font-family: Consolas;">(w,</span> <span style="color: #ce9178; font-family: Consolas;">&quot;POST请求的form表单中的请求参数有：&quot;</span><span style="color: #d4d4d4; font-family: Consolas;">, r.PostForm)</span></div></div><div><span style="color: rgb(212, 212, 212); font-size: 16pt; font-family: Consolas;">}</span></div></div><ul><li><div>我们还可以通过<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">FormValue方法和PostFormValue方法</span>直接获取请求参数，获取请求参数之前会自动调用ParseForm方法</div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(106, 153, 85); font-size: 16pt; font-family: Consolas;">//创建处理器函数</span></div><div><span style="font-size: 16pt; font-family: Consolas; color: rgb(86, 156, 214);">func</span> <span style="font-size: 16pt; font-family: Consolas; color: rgb(220, 220, 170);">handler</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">(w http.ResponseWriter, r</span> <span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">*</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">http.Request) {</span><span style="color: rgb(212, 212, 212); font-family: Consolas; font-size: 16pt;">   </span></div><div><span style="font-size: 16pt; font-family: Consolas; color: #d4d4d4;">   </span><span style="color: rgb(106, 153, 85); font-family: Consolas; font-size: 16pt;">//通过直接调用FormValue方法和PostFormValue方法直接获取请求参数的值</span><div><span style="font-size: 16pt; font-family: Consolas; color: #d4d4d4;"><span style="color: #d4d4d4; font-family: Consolas;">    fmt.</span><span style="color: #dcdcaa; font-family: Consolas;">Fprintln</span><span style="color: #d4d4d4; font-family: Consolas;">(w,</span> <span style="color: #ce9178; font-family: Consolas;">&quot;URL中的user请求参数的值是：&quot;</span><span style="color: #d4d4d4; font-family: Consolas;">, r.</span><span style="color: #dcdcaa; font-family: Consolas;">FormValue</span><span style="color: #d4d4d4; font-family: Consolas;">(</span><span style="color: #ce9178; font-family: Consolas;">&quot;user&quot;</span><span style="color: #d4d4d4; font-family: Consolas;">))</span></span></div><div><span style="color: #d4d4d4; font-family: Consolas;">    fmt.</span><span style="color: #dcdcaa; font-family: Consolas;">Fprintln</span><span style="color: #d4d4d4; font-family: Consolas;">(w,</span> <span style="color: #ce9178; font-family: Consolas;">&quot;Form表单中的username请求参数的值是：&quot;</span><span style="color: #d4d4d4; font-family: Consolas;">, r.</span><span style="color: #dcdcaa; font-family: Consolas;">PostFormValue</span><span style="color: #d4d4d4; font-family: Consolas;">(</span><span style="color: #ce9178; font-family: Consolas;">&quot;username&quot;</span><span style="color: #d4d4d4; font-family: Consolas;">))</span></div></div><div><span style="color: rgb(212, 212, 212); font-size: 16pt; font-family: Consolas;">}</span></div></div><ul><li><div>给客户端响应</div></li><ul><li><div>1）直接调用http.ResponseWriter的Write方法响应一个字符串</div></li><li><div>2）直接调用http.ResponseWriter的Write方法响应一个页面</div></li><li><div>3）<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">响应Json格式的数据</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(86, 156, 214);">func</span> <span style="color: rgb(220, 220, 170);">testJsonRes</span><span style="color: rgb(212, 212, 212);">(w http.ResponseWriter, r</span> <span style="color: rgb(212, 212, 212);">*</span><span style="color: rgb(212, 212, 212);">http.Request) {</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(106, 153, 85);">//设置响应内容的类型</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    w.</span><span style="color: rgb(220, 220, 170);">Header</span><span style="color: rgb(212, 212, 212);">().</span><span style="color: rgb(220, 220, 170);">Set</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">&quot;Content-Type&quot;</span><span style="color: rgb(212, 212, 212);">,</span> <span style="color: rgb(206, 145, 120);">&quot;application/json&quot;</span><span style="color: rgb(212, 212, 212);">)</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(106, 153, 85);">//创建User</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(156, 220, 254);">user</span> <span style="color: rgb(212, 212, 212);">:=</span> <span style="color: rgb(212, 212, 212);">model.User{</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">        ID:</span> <span style="color: rgb(181, 206, 168);">1</span><span style="color: rgb(212, 212, 212);">,</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">        Username:</span> <span style="color: rgb(206, 145, 120);">&quot;admin&quot;</span><span style="color: rgb(212, 212, 212);">,</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">        Password:</span> <span style="color: rgb(206, 145, 120);">&quot;123456&quot;</span><span style="color: rgb(212, 212, 212);">,</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">        Email:</span> <span style="color: rgb(206, 145, 120);">&quot;<a href="mailto:admin@atguigiu.com">admin@atguigiu.com</a>&quot;</span><span style="color: rgb(212, 212, 212);">,</span></font></div><div><span style="color: rgb(212, 212, 212);"><font face="Consolas" style="font-size: 16pt;">    }</font></span></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(106, 153, 85);">//将User转换为Json个数</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(156, 220, 254);">json</span><span style="color: rgb(212, 212, 212);">,</span> <span style="color: rgb(156, 220, 254);">_</span> <span style="color: rgb(212, 212, 212);">:=</span> <span style="color: rgb(212, 212, 212);">json.</span><span style="color: rgb(220, 220, 170);">Marshal</span><span style="color: rgb(212, 212, 212);">(user)</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(106, 153, 85);">//将json格式的数据响应给客户端</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    w.</span><span style="color: rgb(220, 220, 170);">Write</span><span style="color: rgb(212, 212, 212);">(json)</span></font></div><div><span style="color: rgb(212, 212, 212);"><font face="Consolas" style="font-size: 16pt;">}</font></span></div></div><ul><li><div>4）<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">重定向</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 16pt; font-family: Consolas; color: rgb(86, 156, 214);">func</span> <span style="font-size: 16pt; font-family: Consolas; color: rgb(220, 220, 170);">testRedire</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">(w http.ResponseWriter, r</span> <span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">*</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">http.Request) {</span></div><div><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">    </span><span style="font-size: 16pt; font-family: Consolas; color: rgb(106, 153, 85);">//设置响应头中的Location属性</span></div><div><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">    w.</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(220, 220, 170);">Header</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">().</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(220, 220, 170);">Set</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">(</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(206, 145, 120);">&quot;Location&quot;</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">,</span> <span style="font-size: 16pt; font-family: Consolas; color: rgb(206, 145, 120);">&quot;</span><a href="https://www.baidu.com/" style="font-size: 16pt; font-family: Consolas; color: rgb(206, 145, 120);">https://www.baidu.com</a><span style="font-size: 16pt; font-family: Consolas; color: rgb(206, 145, 120);">&quot;</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">)</span></div><div><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">    </span><span style="font-size: 16pt; font-family: Consolas; color: rgb(106, 153, 85);">//设置响应的状态码</span></div><div><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">    w.</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(220, 220, 170);">WriteHeader</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">(</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(181, 206, 168);">302</span><span style="font-size: 16pt; font-family: Consolas; color: rgb(212, 212, 212);">)</span></div><div><span style="color: rgb(212, 212, 212); font-size: 16pt; font-family: Consolas;">}</span></div></div><div>2.<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">模板引擎</span></div><ul><li><div>Go的text/template包和html/template包为我们提供了处理模板的模板引擎</div></li><li><div>核心函数</div></li><ul><li><div>ParseFiles</div></li><ul><li><div>解析模板</div></li></ul><li><div>Execute</div></li><ul><li><div>执行模板</div></li></ul><li><div>ExecuteTemplate</div></li><ul><li><div>通过指定模板名执行指定的模板</div></li></ul><li><div>Must</div></li><ul><li><div>自动处理异常</div></li></ul></ul><li><div>测试代码</div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(106, 153, 85);"><font face="Consolas" style="font-size: 16pt;">//创建处理器函数</font></span></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(86, 156, 214);">func</span> <span style="color: rgb(220, 220, 170);">testTemplate</span><span style="color: rgb(212, 212, 212);">(w http.ResponseWriter, r</span> <span style="color: rgb(212, 212, 212);">*</span><span style="color: rgb(212, 212, 212);">http.Request) {</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(106, 153, 85);">//解析模板文件</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(106, 153, 85);">// t, _ := template.ParseFiles(&quot;index.html&quot;)</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(106, 153, 85);">//通过Must函数让Go帮我们自动处理异常</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(156, 220, 254);">t</span> <span style="color: rgb(212, 212, 212);">:=</span> <span style="color: rgb(212, 212, 212);">template.</span><span style="color: rgb(220, 220, 170);">Must</span><span style="color: rgb(212, 212, 212);">(template.</span><span style="color: rgb(220, 220, 170);">ParseFiles</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">&quot;index.html&quot;</span><span style="color: rgb(212, 212, 212);">,</span> <span style="color: rgb(206, 145, 120);">&quot;index2.html&quot;</span><span style="color: rgb(212, 212, 212);">))</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(106, 153, 85);">//执行</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(106, 153, 85);">// t.Execute(w, &quot;Hello Template&quot;)</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(106, 153, 85);">//将响应数据在index2.html文件中显示</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    t.</span><span style="color: rgb(220, 220, 170);">ExecuteTemplate</span><span style="color: rgb(212, 212, 212);">(w,</span> <span style="color: rgb(206, 145, 120);">&quot;index2.html&quot;</span><span style="color: rgb(212, 212, 212);">,</span> <span style="color: rgb(206, 145, 120);">&quot;我要去index2.html中&quot;</span><span style="color: rgb(212, 212, 212);">)</span></font></div><div><span style="color: rgb(212, 212, 212);"><font face="Consolas" style="font-size: 16pt;">}</font></span></div></div><div>3.<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">处理静态资源</span></div><ul><li><div>对于像css、js等静态文件，以及我们向不经过处理器直接到达一个html页面，我们需要做以下配置</div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(106, 153, 85);"><font face="Consolas" style="font-size: 16pt;">//设置处理静态资源，如css和js文件</font></span></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    http.</span><span style="color: rgb(220, 220, 170);">Handle</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">&quot;/static/&quot;</span><span style="color: rgb(212, 212, 212);">, http.</span><span style="color: rgb(220, 220, 170);">StripPrefix</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">&quot;/static/&quot;</span><span style="color: rgb(212, 212, 212);">, http.</span><span style="color: rgb(220, 220, 170);">FileServer</span><span style="color: rgb(212, 212, 212);">(http.</span><span style="color: rgb(220, 220, 170);">Dir</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">&quot;views/static&quot;</span><span style="color: rgb(212, 212, 212);">))))</span></font></div><div><font face="Consolas" style="font-size: 16pt;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(106, 153, 85);">//直接去html页面</span></font></div><div><font style="font-size: 16pt; font-family: Consolas;"><span style="color: rgb(212, 212, 212);">    http.</span><span style="color: rgb(220, 220, 170);">Handle</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">&quot;/pages/&quot;</span><span style="color: rgb(212, 212, 212);">, http.</span><span style="color: rgb(220, 220, 170);">StripPrefix</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">&quot;/pages/&quot;</span><span style="color: rgb(212, 212, 212);">, http.</span><span style="color: rgb(220, 220, 170);">FileServer</span><span style="color: rgb(212, 212, 212);">(http.</span><span style="color: rgb(220, 220, 170);">Dir</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">&quot;views/pages&quot;</span><span style="color: rgb(212, 212, 212);">))))</span></font></div></div><ul><li><div>以直接去html页面的处理的说明：</div></li><ul><li><div>当我们访问以/pages开头的请求时，通过StripPrefix函数创建的处理器会将/pages前缀去掉，然后去FileServer函数指定的目录views/pages中取寻找资源</div></li></ul></ul><div><br/></div></div></span>
</div></body></html> 